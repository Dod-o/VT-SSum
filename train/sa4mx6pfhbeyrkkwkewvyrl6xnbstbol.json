{
    "id": "sa4mx6pfhbeyrkkwkewvyrl6xnbstbol",
    "title": "Efficient Online Ad Serving in a Display Advertising Meta-Exchange",
    "info": {
        "author": [
            "Kevin J. Lang, Yahoo! Research Silicon Valley"
        ],
        "published": "Aug. 9, 2011",
        "recorded": "February 2011",
        "category": [
            "Top->Computer Science->Web Mining"
        ]
    },
    "url": "http://videolectures.net/wsdm2011_lang_dam/",
    "segmentation": [
        [
            "Yeah OK, this is a talk about a novel variant of the ad selection problem that we."
        ],
        [
            "Countered in one of our systems, and in order to introduce it, I'm going to need to discuss the system in which it exists, and that's the armex display advertising exchange.",
            "And to explain what that is, I need to."
        ],
        [
            "Producer to display advertising in place.",
            "In case you don't know what that is already."
        ],
        [
            "So here's what display advertising is.",
            "It's a gigantic business.",
            "In which advertisers are paying for ads to be shown on publishers web pages and advertisers like it because they can do very precise targeting of the users that they show their ads too."
        ],
        [
            "And as was mentioned in this tutorial a couple of days ago, there was a couple of modes that this is currently operating in.",
            "One in one blocks of ads are presold, and there's also a spot market mode in which the exact moment a user loads a page real time auction occurs to decide which ad is going to be shown, and that's the version we're gonna be talking about today."
        ],
        [
            "So now I'm going to discuss with remind you when the players are in this in this world.",
            "So obviously there's publishers, and there's advertisers.",
            "And publishers have the web pages and they were selling display opportunities, so we call them sources of supply.",
            "The advertiser buying display opportunities so there they create the demand an both of these parties have very important business logic that must be obeyed and some of this is targeting logic and some of it is stuff to protect them from bad transactions occurring and having adverse consequences.",
            "So ad networks is something that you might not have heard it before.",
            "There's actually hundreds of companies that are called AD networks and what they do is they sign contracts with publishers and advertisers.",
            "And then they actually are responsible for ensuring that these real time auctions actually occur.",
            "So in a sense they create the market by bringing supply and demand together, and they're also responsible for enforcing all of this business logic."
        ],
        [
            "So.",
            "For the purposes of this talk, will say that business logic can be encoded by predicates that have to evaluate to true for transaction to occur.",
            "And is convenient too.",
            "To subdivide these predicates into into domains according to the category of objects whose property is being tested.",
            "So, for example, there are user domain predicates that test properties of the user.",
            "For example, an advertiser might want to only show ads too rich users or not.",
            "The children, for example, supply domain predicates are used to test the properties of advertisers.",
            "No, it's either way around publishers.",
            "So for example, they might want to only show their ads on a sports webpage.",
            "And demand predicates, or the opposite of that they were testing properties of advertisers and ads, so they might want to like forbid ads, have a dangerous format or whose topic is known to be associated with spammers, for example."
        ],
        [
            "Um?",
            "Yeah, OK, so so here's sort of a simple graph based model of this story.",
            "So far we're going to represent publishers, advertisers, and ad networks as nodes, business agreements, or edges.",
            "At this point they just show who signed up with who, and business Logic is.",
            "We've included them as predicates and they're sitting on the edges, which are the representative business agreements.",
            "You can also notice here that this is a very fragmented world.",
            "There's essentially hundreds of these little.",
            "Sub markets that are all disconnected, so there's a great deal of market fragmentation which."
        ],
        [
            "Not a good thing for publishers and advertisers.",
            "It might not be possible to make the most economically manage match because a publisher and advertiser belong to different ad networks, and so that's sort of the worst thing about this world.",
            "And another thing is that even though ad networks have undertaken the responsibility of running ad matching service, that's actually like a lot of work and they would really prefer to have an easy way of doing this."
        ],
        [
            "So here's where right media comes in.",
            "This is a company that a few years ago now recognize those two problems that I just pointed out, and they created a solution which really took off in a big way.",
            "And the first thing was, they constructed an ad serving ASP, on which it's very easy for ad networks to run their businesses.",
            "And.",
            "Once the ad networks had joined up, it was possible for them to use a new category of business agreements which are opportunity forward agreements, and this now this code actually is edges between these networks."
        ],
        [
            "And so now you've got a graph that looks more like this where everything is connected and so now this is a much larger marketplace and it can be much more liquid and much more efficient.",
            "And.",
            "These new business agreements are also protected by predicates.",
            "And they also now have revenue sharing rules that will model as multipliers on the edges, and this changes the fundamental nature of the ad servers task as we don't just need to select an ad, we actually need to compute an optimal valid path from a publisher to an advertiser.",
            "And because the networks are now actually sharing in the revenue, they're taking cuts of the money out of the bid, and so that can actually change through the auction winners.",
            "So that's important to know."
        ],
        [
            "Also, so just to make this clear and easy way, here's a little toy example.",
            "So here's these three ad networks in these green guides, are publishers and the red guys are advertisers.",
            "Now let's suppose a display opportunity is generated by some guy visiting this web page up here.",
            "And let's say he's a middle income 40 year old New Yorker.",
            "So now we need to compute the optimal valid path to an ad.",
            "So let's look at validity first.",
            "Well, a two and a four or ruled out.",
            "There's no path to from P1282 because this it's because the spammy ads from their blocks by the demand predicate on this edge, and there's no legal path from P1 to a four because this non rich user is is black from coming to this tax shelter provider.",
            "He doesn't want port or people coming into him, he doesn't.",
            "They're not useful to him.",
            "So that leaves A183 and A5 and who are bidding 2 dollars, $15 and $12.00 respectively.",
            "And you might think that this $15 bill is going to win.",
            "But in fact this network is greater than this network.",
            "It takes like a bigger cut of the money.",
            "So actually from this guy, more money reaches the publisher.",
            "So this is the winning path and the oil company's ad is shown on the Cigar Magazine website."
        ],
        [
            "So OK, that can't be formalized.",
            "Obviously we do in the paper.",
            "I want to point out two things I already mentioned that the answer is now optimal valid path, and since my examples are all these little simple trees, it's important to point out which in that case the problems incredibly trivial.",
            "Actually we have directed multi graph with lots of parallel edges and potentially cross edges and cycles.",
            "So the number of paths can be much larger than the number of nodes and edges."
        ],
        [
            "OK, so now we discussed the algorithm that we developed for this problem.",
            "So here's a couple of things that sound like they might work, but don't."
        ],
        [
            "And first of all you can say, well, there's this huge literature on ad matching.",
            "Let's just use one of those algorithms, but with pads playing the role of ads.",
            "For example, we might pre generate all of the paths, index them, then look up the valid ones for display opportunity and get bids and select the winner.",
            "Problems that can require exponential space and so that doesn't work.",
            "That's not a scalable solution, and here's an idea that I'm calling semi practical 'cause this actually was used for awhile and instead of pre generating the pass we wait until an ad call occurs.",
            "Then we generate the set of valid path from scratch, get the bids and select the winner and this was used when the exchange was a tiny startup company and it's OK if the graph is tiny."
        ],
        [
            "But now that it's a giant exchange and we're like a big company, we need like a much better algorithm that.",
            "So here's the guiding principles.",
            "We used.",
            "The first principle is never ever generate an explicit representation of a complete set of paths.",
            "And instead we can take advantage of this kind of obvious fact that a graph is actually a compact representation of the paths that are in it.",
            "And then to make sure that our solution really is practical in real world, well you some database intuition which says that we need to start enforcing predicates as soon as possible as we can in the campaign in the computation to sort of window down the set of candidate paths into something manageable.",
            "So combining these principles be."
        ],
        [
            "See, we end up with this concept of graph thinning.",
            "In which.",
            "I'm going to stick with two versions of this, strong thinning and weakening, but strong thing is this sort of obvious version of this that we can use actually for the user domain and supply domain you just evaluate all the predicates of that domain.",
            "Then you delete the invalid edges, perform connectivity analysis from the source node, and then delete everything it's unreachable."
        ],
        [
            "And now you've got a smaller graph that obeys all of the constraints of that domain, and so you don't even need to have those constraints on there anymore like so.",
            "For example, suppose this is the graph, and suppose where you want to do strong thinning for the supply domain from publisher P1?",
            "Well, this would kill this edge 'cause this edge says Banning that publisher then that makes all this stuff unreachable.",
            "This publisher was unreasonable to begin with because of the directionality of the edges, so we end up extracting this sub graph and we don't even need this predicate anymore.",
            "Well, actually the edge is gone, but this is just a bare sub graph now."
        ],
        [
            "And so here's a very simple little algorithm that uses that.",
            "So we get to add call and immediately thin the graph for the user and source domains.",
            "Then we get the bids for this surviving ads, sort them in decreasing order of bid, and then for each of these ads we do connectivity analysis backwards and see if there exists any path which respects the domain predicates.",
            "So it's a very simple algorithm.",
            "And, um.",
            "By the way, we're temporarily pretending that this revenue sharing does not.",
            "Revenue sharing does not exist, so the bid determines the winner.",
            "And."
        ],
        [
            "OK, so here's the obvious next question.",
            "Can we do the graph tending even earlier, like for example in a pre computation and the answer is actually pretty straightforward for the supply and demand domains because.",
            "In the current system, we know everything about all the publishers and all the advertisers ahead of time before any ad call arrives, so we can do lots of crunching on that and there's one kink in this though, which is that the demand domain.",
            "Is trickier to deal with because within the context of a given ad call, these predicates don't give a single fixed answer.",
            "It depends on which advertiser we're talking about.",
            "And so we instead."
        ],
        [
            "Using strong thing we have to do weak thinning.",
            "And in this week Fanning it's much harder to kill things, but I've constructed a special example here where we can kill something.",
            "So let's look at this path here.",
            "We've got these two edges are successive edges, and that creates an end between ban A and Bambi.",
            "And if you look at the topology of this graph, you can see that in fact the only two advertisers you could get to from this path or A&B.",
            "So it's logically impossible for any of this to ever be used so we can throw all that away.",
            "And then we can't do anything else away because.",
            "We need.",
            "This edge to get to be and we need this edge to get to see.",
            "And we still need to keep the predicates around so we can remember which edge goes with which destination."
        ],
        [
            "That's that's weak thing.",
            "So here's finally a fairly complete outline of algorithm.",
            "So before any eye color occurs for each source we do strong fending for the supply domain week thing for the demand domain.",
            "Then when an ad called curves, we look up the pre thinned graph for that source.",
            "Then we do strong thing for the user domain.",
            "Then we do the same thing we did before we get the bids, sort the ads.",
            "And then start checking for the existence of the respecting paths, and notice that we, as I alluded to, we still have to check the domain predicates, even though we think for the domain, because this is.",
            "This was weak thinning."
        ],
        [
            "And now the one detail I left out was the fact that this revenue sharing can change the winner."
        ],
        [
            "And that's actually also pretty straightforward to deal with.",
            "All you have to really do is use Dijkstra instead of breadth first.",
            "Search for the thinning and for the pathfinding, and you need a slightly subtler loop termination condition.",
            "You can't stop with the first ad that has a D respecting path.",
            "You have to use some upper lower bounds to prove that that nobody.",
            "No remaining candidate could possibly win."
        ],
        [
            "And here."
        ],
        [
            "Pseudocode for that you can see in the paper Now the this algorithm was calling algorithm B the worst case running time is trivially, trivially, the number of ads times cost of running Dijkstra.",
            "When could this worst case occur?",
            "It would occur if the graph thinning and candidate ordering heuristics are completely defeated.",
            "If this happened in practice, this would be a completely useless algorithm we couldn't possibly meet our latency targets, so really the worst case complexity is not interesting at all.",
            "We need to look at something like typical case, whatever that means and notice that this can actually depend in complicated ways on the graph topology and sort of this relative selectivity of the predicates and how the predicates happen to be arranged on the graph topology."
        ],
        [
            "But we did a few experiments here to get some."
        ],
        [
            "Kind of handle on that, and so I used three families, three parameterized families of graphs that have very diverse connectivity properties.",
            "First of all, trees with parallel edges, then some grids with like sort of a limited number of cycles in them, and then random graphs that just have a huge number of cycles in a huge number of paths.",
            "And then we did 2 flavors of experiment and one we used worst case predicates and vary the size of the graph.",
            "So that's worst case scaling.",
            "And then we in the second set we fixed the size of the graph and we varied the selectivity of the predicates of each domain."
        ],
        [
            "So here I'll just quickly show this is this worst case complexity, which I said was not interesting.",
            "But you can see the fact that this purple line is going faster than green line, that the exponential time algorithms worse than the polynomial time algorithm, right?"
        ],
        [
            "Leslie, so now this is the more interesting thing where it's not so obvious what's going to happen.",
            "So let's like, let's look at this part right here.",
            "I need to explain what it is on the.",
            "X This is algorithm be without the precomputation the X axis is the selectivity of the predicates and more selective is still left.",
            "That's in, which might sound funny.",
            "But that basically means over here less edges are surviving, so the graphs are affectively getting smaller.",
            "That's why tunnel out and what you can see is that for the.",
            "EU and the F domains is.",
            "This is the predicates become more selective.",
            "The graph effectively get smaller and the runtime goes down.",
            "For the demand predicates, nothing happens at all, so that's not so good.",
            "And also you can see that really the results are qualitatively similar for algorithm being algorithm A.",
            "The difference is that these runtimes have a much smaller dynamic range than these.",
            "This is about two orders of magnitude.",
            "Variation and this is about 6 orders of magnitude variation, so again, this algorithm is more robust than that algorithm, although it doesn't, I just want to point out.",
            "It's not always faster.",
            "See this for super strong predicates that result in super tiny graph.",
            "This exponential time algorithm is faster, but we need robustness.",
            "We need for nothing bad to ever happen, right?",
            "So that's why this algorithm is preferable."
        ],
        [
            "OK, so we're left with this red curve hanging out up here.",
            "We're getting no benefit at all from the domain predicates being highly selective."
        ],
        [
            "And so this is where the precomputation comes in.",
            "So now, once we do that and this is, these are both algorithm be.",
            "This is without the precomputation.",
            "This is with the precomputation, so now the curves for all three domains show that the algorithm gets faster as the predicates become more selective, which is what we want, and notice that this red curve is coming down even though we're only doing week thinning for domain D, so I must admit I was actually a little.",
            "I waited awhile before doing this, 'cause I said I was just weeks ending, but it does help, so that's what we actually do in the."
        ],
        [
            "From now."
        ],
        [
            "OK, so how does this all relate to the real adserver?",
            "Well, this algorithm really is what we use now in the real ad server we're serving billions of transactions per day with this, and this exchange is really quite large.",
            "There's hundreds of thousands of business entities in this graph."
        ],
        [
            "And here's a small disclaimer the The real ad serving problem is about 50 times more complicated than I just said.",
            "'cause this exchange has lots and lots of features, but that little.",
            "Formal problem that I defined was carefully chosen in an attempt to get this sort of the computational essence of the problem, and we believe that what we see in the real ad server is broadly similar to what we saw in those little toy experiments, and in particular remember they did an experiment there with varying the selectivity of the predicates.",
            "It turns out that in the real system there are predicates who selectively varies through in a daily cycle.",
            "These are these are called dayparting predicates, and basically they occur because people want to show at different times of the day.",
            "And in particular, a lot.",
            "These predicates allow a lot more edges to be alive during the day than during the night, so when we go from night today, the predicates become less selective.",
            "And which means that the effective graph size grows and you can see that this algorithm A. Runtime goes up a lot more than algorithm B, so this algorithm is better just like we saw in the variable selectivity."
        ],
        [
            "Pyramids.",
            "So for future work, we're always trying to make this thing faster and we've been doing.",
            "There's work underway, and actually pretty far underway right now using predicate indexing so that we can save time in evaluating all these predicates.",
            "There's actually a paper which has been accepted to dub 2011 on that that you can look for and in terms of more future future stuff.",
            "This is a little more speculative, but there seems to be some kind of industry trend to something called real time bidding, in which is sort of 1 level up.",
            "First, we had these ad networks, then they sort of combined into ad exchanges, and now there's discussions going on that maybe some of these exchanges will combine well, at least cooperate, and this creates like even an even bigger effective marketplace, and even more liquidity if it happens.",
            "And then this Chris new research problems because for one thing, the latency.",
            "Caps will become much smaller because now we have multiple systems communicating across the Internet.",
            "And yes, they all have to come up to an answer before noticeable delay occurs.",
            "And also you might remember that I said that our precomputation scheme was taking advantage of the fact that we had complete knowledge of the properties of publishers and advertisers, but now a lot of information will be behind barriers sitting in some other exchange so.",
            "This changes a lot and will create.",
            "Requirement for new."
        ],
        [
            "So that that's it."
        ]
    ],
    "summarization": {
        "clip_0": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "Yeah OK, this is a talk about a novel variant of the ad selection problem that we.",
                    "label": 0
                }
            ]
        },
        "clip_1": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "Countered in one of our systems, and in order to introduce it, I'm going to need to discuss the system in which it exists, and that's the armex display advertising exchange.",
                    "label": 0
                },
                {
                    "sent": "And to explain what that is, I need to.",
                    "label": 0
                }
            ]
        },
        "clip_2": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "Producer to display advertising in place.",
                    "label": 0
                },
                {
                    "sent": "In case you don't know what that is already.",
                    "label": 0
                }
            ]
        },
        "clip_3": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "So here's what display advertising is.",
                    "label": 1
                },
                {
                    "sent": "It's a gigantic business.",
                    "label": 0
                },
                {
                    "sent": "In which advertisers are paying for ads to be shown on publishers web pages and advertisers like it because they can do very precise targeting of the users that they show their ads too.",
                    "label": 1
                }
            ]
        },
        "clip_4": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "And as was mentioned in this tutorial a couple of days ago, there was a couple of modes that this is currently operating in.",
                    "label": 0
                },
                {
                    "sent": "One in one blocks of ads are presold, and there's also a spot market mode in which the exact moment a user loads a page real time auction occurs to decide which ad is going to be shown, and that's the version we're gonna be talking about today.",
                    "label": 0
                }
            ]
        },
        "clip_5": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "So now I'm going to discuss with remind you when the players are in this in this world.",
                    "label": 0
                },
                {
                    "sent": "So obviously there's publishers, and there's advertisers.",
                    "label": 0
                },
                {
                    "sent": "And publishers have the web pages and they were selling display opportunities, so we call them sources of supply.",
                    "label": 1
                },
                {
                    "sent": "The advertiser buying display opportunities so there they create the demand an both of these parties have very important business logic that must be obeyed and some of this is targeting logic and some of it is stuff to protect them from bad transactions occurring and having adverse consequences.",
                    "label": 0
                },
                {
                    "sent": "So ad networks is something that you might not have heard it before.",
                    "label": 1
                },
                {
                    "sent": "There's actually hundreds of companies that are called AD networks and what they do is they sign contracts with publishers and advertisers.",
                    "label": 1
                },
                {
                    "sent": "And then they actually are responsible for ensuring that these real time auctions actually occur.",
                    "label": 1
                },
                {
                    "sent": "So in a sense they create the market by bringing supply and demand together, and they're also responsible for enforcing all of this business logic.",
                    "label": 0
                }
            ]
        },
        "clip_6": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "So.",
                    "label": 0
                },
                {
                    "sent": "For the purposes of this talk, will say that business logic can be encoded by predicates that have to evaluate to true for transaction to occur.",
                    "label": 1
                },
                {
                    "sent": "And is convenient too.",
                    "label": 0
                },
                {
                    "sent": "To subdivide these predicates into into domains according to the category of objects whose property is being tested.",
                    "label": 1
                },
                {
                    "sent": "So, for example, there are user domain predicates that test properties of the user.",
                    "label": 1
                },
                {
                    "sent": "For example, an advertiser might want to only show ads too rich users or not.",
                    "label": 0
                },
                {
                    "sent": "The children, for example, supply domain predicates are used to test the properties of advertisers.",
                    "label": 0
                },
                {
                    "sent": "No, it's either way around publishers.",
                    "label": 0
                },
                {
                    "sent": "So for example, they might want to only show their ads on a sports webpage.",
                    "label": 0
                },
                {
                    "sent": "And demand predicates, or the opposite of that they were testing properties of advertisers and ads, so they might want to like forbid ads, have a dangerous format or whose topic is known to be associated with spammers, for example.",
                    "label": 0
                }
            ]
        },
        "clip_7": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "Um?",
                    "label": 0
                },
                {
                    "sent": "Yeah, OK, so so here's sort of a simple graph based model of this story.",
                    "label": 0
                },
                {
                    "sent": "So far we're going to represent publishers, advertisers, and ad networks as nodes, business agreements, or edges.",
                    "label": 1
                },
                {
                    "sent": "At this point they just show who signed up with who, and business Logic is.",
                    "label": 0
                },
                {
                    "sent": "We've included them as predicates and they're sitting on the edges, which are the representative business agreements.",
                    "label": 0
                },
                {
                    "sent": "You can also notice here that this is a very fragmented world.",
                    "label": 0
                },
                {
                    "sent": "There's essentially hundreds of these little.",
                    "label": 0
                },
                {
                    "sent": "Sub markets that are all disconnected, so there's a great deal of market fragmentation which.",
                    "label": 0
                }
            ]
        },
        "clip_8": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "Not a good thing for publishers and advertisers.",
                    "label": 1
                },
                {
                    "sent": "It might not be possible to make the most economically manage match because a publisher and advertiser belong to different ad networks, and so that's sort of the worst thing about this world.",
                    "label": 1
                },
                {
                    "sent": "And another thing is that even though ad networks have undertaken the responsibility of running ad matching service, that's actually like a lot of work and they would really prefer to have an easy way of doing this.",
                    "label": 0
                }
            ]
        },
        "clip_9": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "So here's where right media comes in.",
                    "label": 0
                },
                {
                    "sent": "This is a company that a few years ago now recognize those two problems that I just pointed out, and they created a solution which really took off in a big way.",
                    "label": 0
                },
                {
                    "sent": "And the first thing was, they constructed an ad serving ASP, on which it's very easy for ad networks to run their businesses.",
                    "label": 1
                },
                {
                    "sent": "And.",
                    "label": 0
                },
                {
                    "sent": "Once the ad networks had joined up, it was possible for them to use a new category of business agreements which are opportunity forward agreements, and this now this code actually is edges between these networks.",
                    "label": 0
                }
            ]
        },
        "clip_10": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "And so now you've got a graph that looks more like this where everything is connected and so now this is a much larger marketplace and it can be much more liquid and much more efficient.",
                    "label": 0
                },
                {
                    "sent": "And.",
                    "label": 0
                },
                {
                    "sent": "These new business agreements are also protected by predicates.",
                    "label": 0
                },
                {
                    "sent": "And they also now have revenue sharing rules that will model as multipliers on the edges, and this changes the fundamental nature of the ad servers task as we don't just need to select an ad, we actually need to compute an optimal valid path from a publisher to an advertiser.",
                    "label": 1
                },
                {
                    "sent": "And because the networks are now actually sharing in the revenue, they're taking cuts of the money out of the bid, and so that can actually change through the auction winners.",
                    "label": 0
                },
                {
                    "sent": "So that's important to know.",
                    "label": 0
                }
            ]
        },
        "clip_11": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "Also, so just to make this clear and easy way, here's a little toy example.",
                    "label": 0
                },
                {
                    "sent": "So here's these three ad networks in these green guides, are publishers and the red guys are advertisers.",
                    "label": 0
                },
                {
                    "sent": "Now let's suppose a display opportunity is generated by some guy visiting this web page up here.",
                    "label": 0
                },
                {
                    "sent": "And let's say he's a middle income 40 year old New Yorker.",
                    "label": 1
                },
                {
                    "sent": "So now we need to compute the optimal valid path to an ad.",
                    "label": 0
                },
                {
                    "sent": "So let's look at validity first.",
                    "label": 0
                },
                {
                    "sent": "Well, a two and a four or ruled out.",
                    "label": 0
                },
                {
                    "sent": "There's no path to from P1282 because this it's because the spammy ads from their blocks by the demand predicate on this edge, and there's no legal path from P1 to a four because this non rich user is is black from coming to this tax shelter provider.",
                    "label": 0
                },
                {
                    "sent": "He doesn't want port or people coming into him, he doesn't.",
                    "label": 0
                },
                {
                    "sent": "They're not useful to him.",
                    "label": 0
                },
                {
                    "sent": "So that leaves A183 and A5 and who are bidding 2 dollars, $15 and $12.00 respectively.",
                    "label": 0
                },
                {
                    "sent": "And you might think that this $15 bill is going to win.",
                    "label": 0
                },
                {
                    "sent": "But in fact this network is greater than this network.",
                    "label": 0
                },
                {
                    "sent": "It takes like a bigger cut of the money.",
                    "label": 0
                },
                {
                    "sent": "So actually from this guy, more money reaches the publisher.",
                    "label": 0
                },
                {
                    "sent": "So this is the winning path and the oil company's ad is shown on the Cigar Magazine website.",
                    "label": 0
                }
            ]
        },
        "clip_12": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "So OK, that can't be formalized.",
                    "label": 0
                },
                {
                    "sent": "Obviously we do in the paper.",
                    "label": 0
                },
                {
                    "sent": "I want to point out two things I already mentioned that the answer is now optimal valid path, and since my examples are all these little simple trees, it's important to point out which in that case the problems incredibly trivial.",
                    "label": 1
                },
                {
                    "sent": "Actually we have directed multi graph with lots of parallel edges and potentially cross edges and cycles.",
                    "label": 0
                },
                {
                    "sent": "So the number of paths can be much larger than the number of nodes and edges.",
                    "label": 0
                }
            ]
        },
        "clip_13": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "OK, so now we discussed the algorithm that we developed for this problem.",
                    "label": 0
                },
                {
                    "sent": "So here's a couple of things that sound like they might work, but don't.",
                    "label": 0
                }
            ]
        },
        "clip_14": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "And first of all you can say, well, there's this huge literature on ad matching.",
                    "label": 0
                },
                {
                    "sent": "Let's just use one of those algorithms, but with pads playing the role of ads.",
                    "label": 1
                },
                {
                    "sent": "For example, we might pre generate all of the paths, index them, then look up the valid ones for display opportunity and get bids and select the winner.",
                    "label": 1
                },
                {
                    "sent": "Problems that can require exponential space and so that doesn't work.",
                    "label": 0
                },
                {
                    "sent": "That's not a scalable solution, and here's an idea that I'm calling semi practical 'cause this actually was used for awhile and instead of pre generating the pass we wait until an ad call occurs.",
                    "label": 0
                },
                {
                    "sent": "Then we generate the set of valid path from scratch, get the bids and select the winner and this was used when the exchange was a tiny startup company and it's OK if the graph is tiny.",
                    "label": 1
                }
            ]
        },
        "clip_15": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "But now that it's a giant exchange and we're like a big company, we need like a much better algorithm that.",
                    "label": 0
                },
                {
                    "sent": "So here's the guiding principles.",
                    "label": 0
                },
                {
                    "sent": "We used.",
                    "label": 0
                },
                {
                    "sent": "The first principle is never ever generate an explicit representation of a complete set of paths.",
                    "label": 1
                },
                {
                    "sent": "And instead we can take advantage of this kind of obvious fact that a graph is actually a compact representation of the paths that are in it.",
                    "label": 1
                },
                {
                    "sent": "And then to make sure that our solution really is practical in real world, well you some database intuition which says that we need to start enforcing predicates as soon as possible as we can in the campaign in the computation to sort of window down the set of candidate paths into something manageable.",
                    "label": 0
                },
                {
                    "sent": "So combining these principles be.",
                    "label": 0
                }
            ]
        },
        "clip_16": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "See, we end up with this concept of graph thinning.",
                    "label": 1
                },
                {
                    "sent": "In which.",
                    "label": 0
                },
                {
                    "sent": "I'm going to stick with two versions of this, strong thinning and weakening, but strong thing is this sort of obvious version of this that we can use actually for the user domain and supply domain you just evaluate all the predicates of that domain.",
                    "label": 0
                },
                {
                    "sent": "Then you delete the invalid edges, perform connectivity analysis from the source node, and then delete everything it's unreachable.",
                    "label": 1
                }
            ]
        },
        "clip_17": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "And now you've got a smaller graph that obeys all of the constraints of that domain, and so you don't even need to have those constraints on there anymore like so.",
                    "label": 0
                },
                {
                    "sent": "For example, suppose this is the graph, and suppose where you want to do strong thinning for the supply domain from publisher P1?",
                    "label": 1
                },
                {
                    "sent": "Well, this would kill this edge 'cause this edge says Banning that publisher then that makes all this stuff unreachable.",
                    "label": 0
                },
                {
                    "sent": "This publisher was unreasonable to begin with because of the directionality of the edges, so we end up extracting this sub graph and we don't even need this predicate anymore.",
                    "label": 0
                },
                {
                    "sent": "Well, actually the edge is gone, but this is just a bare sub graph now.",
                    "label": 0
                }
            ]
        },
        "clip_18": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "And so here's a very simple little algorithm that uses that.",
                    "label": 0
                },
                {
                    "sent": "So we get to add call and immediately thin the graph for the user and source domains.",
                    "label": 0
                },
                {
                    "sent": "Then we get the bids for this surviving ads, sort them in decreasing order of bid, and then for each of these ads we do connectivity analysis backwards and see if there exists any path which respects the domain predicates.",
                    "label": 1
                },
                {
                    "sent": "So it's a very simple algorithm.",
                    "label": 0
                },
                {
                    "sent": "And, um.",
                    "label": 1
                },
                {
                    "sent": "By the way, we're temporarily pretending that this revenue sharing does not.",
                    "label": 0
                },
                {
                    "sent": "Revenue sharing does not exist, so the bid determines the winner.",
                    "label": 0
                },
                {
                    "sent": "And.",
                    "label": 0
                }
            ]
        },
        "clip_19": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "OK, so here's the obvious next question.",
                    "label": 0
                },
                {
                    "sent": "Can we do the graph tending even earlier, like for example in a pre computation and the answer is actually pretty straightforward for the supply and demand domains because.",
                    "label": 1
                },
                {
                    "sent": "In the current system, we know everything about all the publishers and all the advertisers ahead of time before any ad call arrives, so we can do lots of crunching on that and there's one kink in this though, which is that the demand domain.",
                    "label": 0
                },
                {
                    "sent": "Is trickier to deal with because within the context of a given ad call, these predicates don't give a single fixed answer.",
                    "label": 0
                },
                {
                    "sent": "It depends on which advertiser we're talking about.",
                    "label": 0
                },
                {
                    "sent": "And so we instead.",
                    "label": 0
                }
            ]
        },
        "clip_20": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "Using strong thing we have to do weak thinning.",
                    "label": 1
                },
                {
                    "sent": "And in this week Fanning it's much harder to kill things, but I've constructed a special example here where we can kill something.",
                    "label": 0
                },
                {
                    "sent": "So let's look at this path here.",
                    "label": 0
                },
                {
                    "sent": "We've got these two edges are successive edges, and that creates an end between ban A and Bambi.",
                    "label": 0
                },
                {
                    "sent": "And if you look at the topology of this graph, you can see that in fact the only two advertisers you could get to from this path or A&B.",
                    "label": 0
                },
                {
                    "sent": "So it's logically impossible for any of this to ever be used so we can throw all that away.",
                    "label": 0
                },
                {
                    "sent": "And then we can't do anything else away because.",
                    "label": 0
                },
                {
                    "sent": "We need.",
                    "label": 0
                },
                {
                    "sent": "This edge to get to be and we need this edge to get to see.",
                    "label": 0
                },
                {
                    "sent": "And we still need to keep the predicates around so we can remember which edge goes with which destination.",
                    "label": 0
                }
            ]
        },
        "clip_21": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "That's that's weak thing.",
                    "label": 0
                },
                {
                    "sent": "So here's finally a fairly complete outline of algorithm.",
                    "label": 0
                },
                {
                    "sent": "So before any eye color occurs for each source we do strong fending for the supply domain week thing for the demand domain.",
                    "label": 0
                },
                {
                    "sent": "Then when an ad called curves, we look up the pre thinned graph for that source.",
                    "label": 0
                },
                {
                    "sent": "Then we do strong thing for the user domain.",
                    "label": 0
                },
                {
                    "sent": "Then we do the same thing we did before we get the bids, sort the ads.",
                    "label": 0
                },
                {
                    "sent": "And then start checking for the existence of the respecting paths, and notice that we, as I alluded to, we still have to check the domain predicates, even though we think for the domain, because this is.",
                    "label": 0
                },
                {
                    "sent": "This was weak thinning.",
                    "label": 0
                }
            ]
        },
        "clip_22": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "And now the one detail I left out was the fact that this revenue sharing can change the winner.",
                    "label": 0
                }
            ]
        },
        "clip_23": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "And that's actually also pretty straightforward to deal with.",
                    "label": 0
                },
                {
                    "sent": "All you have to really do is use Dijkstra instead of breadth first.",
                    "label": 0
                },
                {
                    "sent": "Search for the thinning and for the pathfinding, and you need a slightly subtler loop termination condition.",
                    "label": 0
                },
                {
                    "sent": "You can't stop with the first ad that has a D respecting path.",
                    "label": 0
                },
                {
                    "sent": "You have to use some upper lower bounds to prove that that nobody.",
                    "label": 0
                },
                {
                    "sent": "No remaining candidate could possibly win.",
                    "label": 0
                }
            ]
        },
        "clip_24": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "And here.",
                    "label": 0
                }
            ]
        },
        "clip_25": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "Pseudocode for that you can see in the paper Now the this algorithm was calling algorithm B the worst case running time is trivially, trivially, the number of ads times cost of running Dijkstra.",
                    "label": 1
                },
                {
                    "sent": "When could this worst case occur?",
                    "label": 1
                },
                {
                    "sent": "It would occur if the graph thinning and candidate ordering heuristics are completely defeated.",
                    "label": 1
                },
                {
                    "sent": "If this happened in practice, this would be a completely useless algorithm we couldn't possibly meet our latency targets, so really the worst case complexity is not interesting at all.",
                    "label": 0
                },
                {
                    "sent": "We need to look at something like typical case, whatever that means and notice that this can actually depend in complicated ways on the graph topology and sort of this relative selectivity of the predicates and how the predicates happen to be arranged on the graph topology.",
                    "label": 0
                }
            ]
        },
        "clip_26": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "But we did a few experiments here to get some.",
                    "label": 0
                }
            ]
        },
        "clip_27": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "Kind of handle on that, and so I used three families, three parameterized families of graphs that have very diverse connectivity properties.",
                    "label": 1
                },
                {
                    "sent": "First of all, trees with parallel edges, then some grids with like sort of a limited number of cycles in them, and then random graphs that just have a huge number of cycles in a huge number of paths.",
                    "label": 0
                },
                {
                    "sent": "And then we did 2 flavors of experiment and one we used worst case predicates and vary the size of the graph.",
                    "label": 0
                },
                {
                    "sent": "So that's worst case scaling.",
                    "label": 0
                },
                {
                    "sent": "And then we in the second set we fixed the size of the graph and we varied the selectivity of the predicates of each domain.",
                    "label": 1
                }
            ]
        },
        "clip_28": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "So here I'll just quickly show this is this worst case complexity, which I said was not interesting.",
                    "label": 0
                },
                {
                    "sent": "But you can see the fact that this purple line is going faster than green line, that the exponential time algorithms worse than the polynomial time algorithm, right?",
                    "label": 0
                }
            ]
        },
        "clip_29": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "Leslie, so now this is the more interesting thing where it's not so obvious what's going to happen.",
                    "label": 0
                },
                {
                    "sent": "So let's like, let's look at this part right here.",
                    "label": 0
                },
                {
                    "sent": "I need to explain what it is on the.",
                    "label": 0
                },
                {
                    "sent": "X This is algorithm be without the precomputation the X axis is the selectivity of the predicates and more selective is still left.",
                    "label": 0
                },
                {
                    "sent": "That's in, which might sound funny.",
                    "label": 0
                },
                {
                    "sent": "But that basically means over here less edges are surviving, so the graphs are affectively getting smaller.",
                    "label": 0
                },
                {
                    "sent": "That's why tunnel out and what you can see is that for the.",
                    "label": 0
                },
                {
                    "sent": "EU and the F domains is.",
                    "label": 0
                },
                {
                    "sent": "This is the predicates become more selective.",
                    "label": 0
                },
                {
                    "sent": "The graph effectively get smaller and the runtime goes down.",
                    "label": 0
                },
                {
                    "sent": "For the demand predicates, nothing happens at all, so that's not so good.",
                    "label": 0
                },
                {
                    "sent": "And also you can see that really the results are qualitatively similar for algorithm being algorithm A.",
                    "label": 0
                },
                {
                    "sent": "The difference is that these runtimes have a much smaller dynamic range than these.",
                    "label": 0
                },
                {
                    "sent": "This is about two orders of magnitude.",
                    "label": 0
                },
                {
                    "sent": "Variation and this is about 6 orders of magnitude variation, so again, this algorithm is more robust than that algorithm, although it doesn't, I just want to point out.",
                    "label": 0
                },
                {
                    "sent": "It's not always faster.",
                    "label": 0
                },
                {
                    "sent": "See this for super strong predicates that result in super tiny graph.",
                    "label": 0
                },
                {
                    "sent": "This exponential time algorithm is faster, but we need robustness.",
                    "label": 0
                },
                {
                    "sent": "We need for nothing bad to ever happen, right?",
                    "label": 0
                },
                {
                    "sent": "So that's why this algorithm is preferable.",
                    "label": 0
                }
            ]
        },
        "clip_30": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "OK, so we're left with this red curve hanging out up here.",
                    "label": 0
                },
                {
                    "sent": "We're getting no benefit at all from the domain predicates being highly selective.",
                    "label": 0
                }
            ]
        },
        "clip_31": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "And so this is where the precomputation comes in.",
                    "label": 0
                },
                {
                    "sent": "So now, once we do that and this is, these are both algorithm be.",
                    "label": 0
                },
                {
                    "sent": "This is without the precomputation.",
                    "label": 0
                },
                {
                    "sent": "This is with the precomputation, so now the curves for all three domains show that the algorithm gets faster as the predicates become more selective, which is what we want, and notice that this red curve is coming down even though we're only doing week thinning for domain D, so I must admit I was actually a little.",
                    "label": 0
                },
                {
                    "sent": "I waited awhile before doing this, 'cause I said I was just weeks ending, but it does help, so that's what we actually do in the.",
                    "label": 0
                }
            ]
        },
        "clip_32": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "From now.",
                    "label": 0
                }
            ]
        },
        "clip_33": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "OK, so how does this all relate to the real adserver?",
                    "label": 0
                },
                {
                    "sent": "Well, this algorithm really is what we use now in the real ad server we're serving billions of transactions per day with this, and this exchange is really quite large.",
                    "label": 1
                },
                {
                    "sent": "There's hundreds of thousands of business entities in this graph.",
                    "label": 0
                }
            ]
        },
        "clip_34": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "And here's a small disclaimer the The real ad serving problem is about 50 times more complicated than I just said.",
                    "label": 1
                },
                {
                    "sent": "'cause this exchange has lots and lots of features, but that little.",
                    "label": 0
                },
                {
                    "sent": "Formal problem that I defined was carefully chosen in an attempt to get this sort of the computational essence of the problem, and we believe that what we see in the real ad server is broadly similar to what we saw in those little toy experiments, and in particular remember they did an experiment there with varying the selectivity of the predicates.",
                    "label": 0
                },
                {
                    "sent": "It turns out that in the real system there are predicates who selectively varies through in a daily cycle.",
                    "label": 0
                },
                {
                    "sent": "These are these are called dayparting predicates, and basically they occur because people want to show at different times of the day.",
                    "label": 0
                },
                {
                    "sent": "And in particular, a lot.",
                    "label": 0
                },
                {
                    "sent": "These predicates allow a lot more edges to be alive during the day than during the night, so when we go from night today, the predicates become less selective.",
                    "label": 1
                },
                {
                    "sent": "And which means that the effective graph size grows and you can see that this algorithm A. Runtime goes up a lot more than algorithm B, so this algorithm is better just like we saw in the variable selectivity.",
                    "label": 0
                }
            ]
        },
        "clip_35": {
            "is_summarization_sample": true,
            "summarization_data": [
                {
                    "sent": "Pyramids.",
                    "label": 0
                },
                {
                    "sent": "So for future work, we're always trying to make this thing faster and we've been doing.",
                    "label": 0
                },
                {
                    "sent": "There's work underway, and actually pretty far underway right now using predicate indexing so that we can save time in evaluating all these predicates.",
                    "label": 0
                },
                {
                    "sent": "There's actually a paper which has been accepted to dub 2011 on that that you can look for and in terms of more future future stuff.",
                    "label": 0
                },
                {
                    "sent": "This is a little more speculative, but there seems to be some kind of industry trend to something called real time bidding, in which is sort of 1 level up.",
                    "label": 1
                },
                {
                    "sent": "First, we had these ad networks, then they sort of combined into ad exchanges, and now there's discussions going on that maybe some of these exchanges will combine well, at least cooperate, and this creates like even an even bigger effective marketplace, and even more liquidity if it happens.",
                    "label": 0
                },
                {
                    "sent": "And then this Chris new research problems because for one thing, the latency.",
                    "label": 1
                },
                {
                    "sent": "Caps will become much smaller because now we have multiple systems communicating across the Internet.",
                    "label": 0
                },
                {
                    "sent": "And yes, they all have to come up to an answer before noticeable delay occurs.",
                    "label": 0
                },
                {
                    "sent": "And also you might remember that I said that our precomputation scheme was taking advantage of the fact that we had complete knowledge of the properties of publishers and advertisers, but now a lot of information will be behind barriers sitting in some other exchange so.",
                    "label": 0
                },
                {
                    "sent": "This changes a lot and will create.",
                    "label": 0
                },
                {
                    "sent": "Requirement for new.",
                    "label": 0
                }
            ]
        },
        "clip_36": {
            "is_summarization_sample": false,
            "summarization_data": [
                {
                    "sent": "So that that's it.",
                    "label": 0
                }
            ]
        }
    }
}